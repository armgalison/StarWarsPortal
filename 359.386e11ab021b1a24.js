"use strict";(self.webpackChunkStarWarsPortal=self.webpackChunkStarWarsPortal||[]).push([[359],{2359:(k,u,n)=>{n.r(u),n.d(u,{StarshipsModule:()=>R});var h=n(6895),A=n(4466),p=n(7497),t=n(6738),C=n(2340),T=n(5254),d=n(1709),g=n(4850),S=n(2014),m=n(2821),U=n(7314),v=n(4843);function b(s,e,i){return 0===i?[e]:(s.push(e),s)}var L=n(529),F=n(5552);let f=(()=>{class s{constructor(i,r){this.http=i,this.characterService=r,this.starshipUrl=`${C.N.apiUrl}/api/starships`}getStartships(i){return this.http.get(`${this.starshipUrl}`,{params:i})}getStarshipById(i){return this.http.get(`${this.starshipUrl}/${i}`)}getStarshipWithPilotsById(i){return this.getStarshipById(i).pipe((0,d.zg)(this.combinePilots.bind(this)))}combinePilots(i){return this.getPilotsFromUrls(i.pilots).pipe((0,g.U)(r=>({...i,pilots:r})))}getPilotIdFromUrl(i){return i.split("/")[5]}getPilotsFromUrls(i=[]){return(0,T.D)(i).pipe((0,g.U)(r=>this.getPilotIdFromUrl(r)),(0,d.zg)(r=>this.characterService.getCharacterById(r)),function I(){return function x(s,e){return arguments.length>=2?function(r){return(0,v.z)((0,S.R)(s,e),(0,m.h)(1),(0,U.d)(e))(r)}:function(r){return(0,v.z)((0,S.R)((o,a,c)=>s(o,a,c+1)),(0,m.h)(1))(r)}}(b,[])}())}}return s.\u0275fac=function(i){return new(i||s)(t.LFG(L.eN),t.LFG(F.A))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var y=n(4487),Z=n(9891);const M=function(s){return["/characters",s]};function J(s,e){if(1&s&&(t.TgZ(0,"i",11),t._uU(1),t.qZA()),2&s){const i=e.$implicit,r=t.oxw(2);t.Q6J("routerLink",t.VKq(2,M,r.getPilotIdFromUrl(i.url))),t.xp6(1),t.hij(" ",i.name," ")}}function B(s,e){1&s&&(t.TgZ(0,"i"),t._uU(1,"n/a"),t.qZA())}function P(s,e){if(1&s&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),t._uU(4),t.qZA()()(),t.TgZ(5,"div",5)(6,"div",6)(7,"ul",7)(8,"li",8),t._uU(9),t.qZA(),t.TgZ(10,"li",8),t._uU(11),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.qZA(),t.TgZ(14,"li",8),t._uU(15),t.qZA(),t.TgZ(16,"li",8),t._uU(17),t.qZA(),t.TgZ(18,"li",8),t._uU(19),t.qZA(),t.TgZ(20,"li",8),t._uU(21," Pilots: \xa0 "),t.YNc(22,J,2,4,"i",9),t.YNc(23,B,2,0,"i",10),t.qZA()()()()()),2&s){const i=t.oxw();t.xp6(4),t.Oqu(i.starship.name),t.xp6(5),t.hij("Model: ",i.starship.model,""),t.xp6(2),t.hij("Manufacturer: ",i.starship.manufacturer,""),t.xp6(2),t.hij("Cost in Credits: ",i.starship.cost_in_credits,""),t.xp6(2),t.hij("Length: ",i.starship.length,""),t.xp6(2),t.hij("Max Atmosphering Speed: ",i.starship.max_atmosphering_speed,""),t.xp6(2),t.hij("Crew: ",i.starship.crew,""),t.xp6(3),t.Q6J("ngForOf",i.starship.pilots),t.xp6(1),t.Q6J("ngIf",i.starship.pilots&&0===i.starship.pilots.length)}}let z=(()=>{class s{constructor(i,r,o,a){this.activatedRoute=i,this.starshipService=r,this.loaderService=o,this.toastService=a}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.loadStarship()}loadStarship(){this.loaderService.show(),this.starshipService.getStarshipWithPilotsById(this.id).subscribe({next:i=>{this.starship=i,this.loaderService.hide()},error:i=>{console.error(i),this.toastService.danger("Unable to load starship, please try again."),this.loaderService.hide()}})}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(p.gz),t.Y36(f),t.Y36(y.D),t.Y36(Z.k))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-starship-details"]],decls:2,vars:1,consts:[[1,"character-details"],["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-12","padding-top","center-align"],[1,"row","padding-top"],[1,"col-12"],[1,"list-group"],[1,"list-group-item"],["class","pilot-link",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"pilot-link",3,"routerLink"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0),t.YNc(1,P,24,9,"div",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",r.starship))},dependencies:[h.sg,h.O5,p.rH],styles:[".pilot-link[_ngcontent-%COMP%]{cursor:pointer;border:1px solid rgba(0,0,0,.125);margin-right:5px}.pilot-link[_ngcontent-%COMP%]:hover{font-weight:900}"]}),s})();var O=n(5861),j=n(9168),l=n(4719);const Y=function(s){return["/starships",s]};function D(s,e){if(1&s&&(t.TgZ(0,"li",16),t._uU(1),t.TgZ(2,"button",17),t._uU(3,"Details"),t.qZA()()),2&s){const i=e.$implicit,r=t.oxw();t.xp6(1),t.hij(" ",i.name," "),t.xp6(1),t.Q6J("routerLink",t.VKq(2,Y,r.getStarshipId(i.url)))}}const N=[{path:"",component:(()=>{class s{constructor(i,r,o){this.starshipService=i,this.loaderService=r,this.toastService=o,this.currentPage=1,this.searchInput="",this.isSortedByAlphabet=!0}getStarships(i=1){var r=this;return(0,O.Z)(function*(){try{r.loaderService.show();const o={page:i,search:r.searchInput},{count:a,results:c}=yield r.starshipService.getStartships(o).toPromise();r.starships=c,r.count=a}catch(o){r.toastService.danger("Unable to load starships, please try again."),console.error(o)}finally{r.loaderService.hide()}})()}getStarshipId(i){return i.split("/")[5]}ngOnInit(){this.getStarships(1)}toggleSortStarships(){this.starships=this.isSortedByAlphabet?this.sortStarshipsReverseAlphabetical(this.starships):this.sortStarshipsByAlphabet(this.starships),this.isSortedByAlphabet=!this.isSortedByAlphabet}sortStarshipsByAlphabet(i){return i.sort((r,o)=>r.name<o.name?-1:1)}sortStarshipsReverseAlphabetical(i){return i.sort((r,o)=>r.name<o.name?1:-1)}}return s.\u0275fac=function(i){return new(i||s)(t.Y36(f),t.Y36(y.D),t.Y36(Z.k))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-starships-list"]],decls:22,vars:10,consts:[[1,"container"],[1,"row","padding-top"],[1,"col-12"],["for","searchStarships"],[1,"input-group"],["type","text","id","searchStarships",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"input-group-append"],[1,"btn","btn-outline-secondary",3,"click"],[1,"row"],[1,"btn","btn-outline-secondary","right-float","margin-top",3,"click"],["src","assets/icons/sort-by-alphabet.png","alt","",3,"hidden"],["src","assets/icons/sort-reverse-alphabetical-order.png","alt","",3,"hidden"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-center"],[3,"boundaryLinks","collectionSize","maxSize","rotate","ellipses","page","pageChange"],[1,"list-group-item"],[1,"btn","btn-outline-secondary","right-float",3,"routerLink"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"Search by name:"),t.qZA(),t.TgZ(5,"div",4)(6,"input",5),t.NdJ("ngModelChange",function(a){return r.searchInput=a})("keyup.enter",function(){return r.getStarships()}),t.qZA(),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return r.getStarships()}),t._uU(9,"Search"),t.qZA()()()()(),t.TgZ(10,"div",8)(11,"div",2)(12,"button",9),t.NdJ("click",function(){return r.toggleSortStarships()}),t._UZ(13,"img",10)(14,"img",11),t.qZA()()(),t.TgZ(15,"div",1)(16,"div",2)(17,"ul",12),t.YNc(18,D,4,4,"li",13),t.qZA()()(),t.TgZ(19,"div",1)(20,"div",14)(21,"ngb-pagination",15),t.NdJ("pageChange",function(a){return r.getStarships(a)}),t.qZA()()()()),2&i&&(t.xp6(6),t.Q6J("ngModel",r.searchInput),t.xp6(7),t.Q6J("hidden",r.isSortedByAlphabet),t.xp6(1),t.Q6J("hidden",!r.isSortedByAlphabet),t.xp6(4),t.Q6J("ngForOf",r.starships),t.xp6(3),t.Q6J("boundaryLinks",!0)("collectionSize",r.count)("maxSize",5)("rotate",!0)("ellipses",!1)("page",r.currentPage))},dependencies:[h.sg,j.N9,l.Fj,l.JJ,l.On,p.rH]}),s})()},{path:":id",component:z}];let Q=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.Bz.forChild(N),p.Bz]}),s})(),R=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[h.ez,A.m,Q]}),s})()}}]);